<div class="container" style="padding: 20px">
  <h2 style="color: #666666; margin: 30px 0 20px 0">Editar Funcionário</h2>

  <div
    *ngIf="errorMessage"
    class="error-message"
    style="color: red; margin-bottom: 20px"
  >
    {{ errorMessage }}
  </div>

  <div *ngIf="funcionario; else loading">
    <div
      class="card"
      style="padding: 20px; border: 1px solid #e0e0e0; border-radius: 4px"
    >
      <form [formGroup]="funcionarioForm" (ngSubmit)="saveFuncionario()">
        <div style="margin-bottom: 15px">
          <label for="nome">Nome:</label>
          <input
            pInputText
            id="nome"
            formControlName="nome"
            style="width: 100%"
          />
          <small
            *ngIf="funcionarioForm.get('nome')?.touched && funcionarioForm.get('nome')?.errors?.['required']"
            style="color: red"
          >
            Nome é obrigatório.
          </small>
        </div>
        <div style="margin-bottom: 15px">
          <label for="matricula">Matrícula:</label>
          <input
            pInputText
            id="matricula"
            formControlName="matricula"
            style="width: 100%"
          />
          <small
            *ngIf="funcionarioForm.get('matricula')?.touched && funcionarioForm.get('matricula')?.errors?.['required']"
            style="color: red"
          >
            Matrícula é obrigatória.
          </small>
        </div>
        <div style="margin-bottom: 15px">
          <label for="telefone">Telefone:</label>
          <input
            pInputText
            id="telefone"
            formControlName="telefone"
            style="width: 100%"
          />
          <small
            *ngIf="funcionarioForm.get('telefone')?.touched && funcionarioForm.get('telefone')?.errors?.['required']"
            style="color: red"
          >
            Telefone é obrigatório.
          </small>
        </div>
        <div style="margin-bottom: 15px">
          <label for="status">Status:</label>
          <input
            pInputText
            id="status"
            formControlName="status"
            style="width: 100%"
          />
          <small
            *ngIf="funcionarioForm.get('status')?.touched && funcionarioForm.get('status')?.errors?.['required']"
            style="color: red"
          >
            Status é obrigatório.
          </small>
        </div>

        <h3>Documentos</h3>
        <ul
          *ngIf="
            funcionario.documentos && funcionario.documentos.length > 0;
            else noDocuments
          "
        >
          <li *ngFor="let doc of funcionario.documentos">
            <strong>Categoria:</strong> {{ doc.categoria }} <br />
            <strong>Nome do Arquivo:</strong>
            {{ doc.nomeArquivo || doc.arquivo }} <br />
            <a *ngIf="doc.url" [href]="doc.url" target="_blank"
              >Baixar/Visualizar</a
            >
            <span *ngIf="!doc.url">Sem URL disponível</span>
          </li>
        </ul>
        <ng-template #noDocuments>
          <p>Nenhum documento associado.</p>
        </ng-template>

        <div style="margin-top: 20px">
          <button
            pButton
            type="submit"
            label="Salvar"
            icon="pi pi-check"
            class="p-button-primary"
            [disabled]="!funcionarioForm.valid"
          ></button>
          <button
            pButton
            type="button"
            label="Deletar"
            icon="pi pi-trash"
            class="p-button-danger"
            (click)="deleteFuncionario()"
            style="margin-left: 10px"
          ></button>
          <button
            pButton
            type="button"
            label="Voltar"
            icon="pi pi-arrow-left"
            class="p-button-secondary"
            (click)="goBack()"
            style="margin-left: 10px"
          ></button>
        </div>
      </form>
    </div>
  </div>

  <ng-template #loading>
    <p>Carregando...</p>
  </ng-template>
</div>
